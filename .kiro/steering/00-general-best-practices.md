---
inclusion: always
---

# 通用最佳实践

本文档包含所有 Spec 开发阶段都应遵守的通用原则和最佳实践。

## 核心原则

### 1. 渐进式开发，避免一次性完成

**切勿一次性完成所有阶段** - LLM 是概率模型，需要通过多次自检和双向验证来确保质量。

- 完成需求后，先验证再进入设计
- 完成设计后，先验证再拆分任务
- 完成任务拆分后，先验证再执行
- 每个阶段都要进行充分的自检和确认

### 2. 持续验证和反馈

每个阶段完成后都要进行验证：

- 与上一阶段的输出保持一致性
- 内容本身没有内部冲突
- 完整覆盖上一阶段的要求
- 没有超出范围的内容

### 3. 主动沟通和确认

遇到以下情况时，必须与用户确认：

- 需求不清晰或存在歧义
- 设计方案有多种选择
- 发现可能的过度设计
- 任务拆分粒度不确定
- 技术实现方案需要权衡

## 质量保证原则

### 1. 完整性检查

- 是否覆盖了所有要求？
- 是否有遗漏的内容？
- 是否有未考虑的边界情况？

### 2. 一致性检查

- 与前序阶段的输出是否一致？
- 内部各部分之间是否一致？
- 术语和概念使用是否一致？

### 3. 准确性检查

- 理解是否准确？
- 表述是否准确？
- 技术方案是否准确？

### 4. 可行性检查

- 设计是否可实施？
- 任务是否可执行？
- 验证标准是否可操作？

## 文档编写规范

### 1. 清晰性

- 使用简洁明了的语言
- 避免模糊和歧义的表述
- 提供必要的上下文信息

### 2. 结构化

- 使用清晰的层次结构
- 合理组织内容
- 便于查找和理解

### 3. 可追溯性

- 明确标注来源和依据
- 保持与原始需求的关联
- 记录重要的决策和理由

## 协作原则

### 1. 透明沟通

- 及时报告进展和问题
- 清晰表达疑问和建议
- 主动寻求反馈和确认

### 2. 尊重反馈

- 认真对待用户的反馈
- 及时调整和改进
- 记录重要的讨论结果

### 3. 知识共享

- 记录重要的经验和教训
- 分享有价值的实践方法
- 持续改进工作流程

## 风险管理

### 1. 及早识别风险

- 技术风险：技术选型、实现难度
- 需求风险：需求变更、理解偏差
- 进度风险：时间估算、依赖关系

### 2. 制定应对策略

- 对高风险项目制定备选方案
- 预留适当的缓冲时间
- 建立风险监控机制

### 3. 持续跟踪和调整

- 定期评估风险状态
- 及时调整应对策略
- 总结经验教训

## 效率提升

### 1. 避免返工

- 前期充分验证，避免后期大改
- 及时发现问题，降低修复成本
- 保持良好的代码和文档质量

### 2. 复用经验

- 参考类似项目的经验
- 使用成熟的设计模式
- 建立可复用的组件库

### 3. 自动化验证

- 使用自动化测试
- 使用持续集成
- 使用代码质量检查工具

## 关键检查清单

每个阶段完成后，都应该检查：

- [ ] 内容完整，没有遗漏
- [ ] 与前序阶段保持一致
- [ ] 内部没有冲突和矛盾
- [ ] 表述清晰，没有歧义
- [ ] 已与用户确认关键决策
- [ ] 已记录重要的讨论和决策
- [ ] 已识别潜在的风险
- [ ] 已制定验证标准

## 常见陷阱

### 1. 过早优化

- 不要在需求不明确时就开始设计
- 不要在设计不完整时就开始编码
- 先保证正确性，再考虑性能优化

### 2. 过度设计

- 只实现当前需要的功能
- 避免为未来可能的需求过度设计
- 保持设计的简洁性

### 3. 忽视验证

- 不要跳过验证环节
- 不要假设一切都是正确的
- 及时发现和修正问题

### 4. 沟通不足

- 不要自行假设用户的意图
- 不要隐藏问题和风险
- 主动寻求反馈和确认

## 持续改进

### 1. 定期回顾

- 回顾项目执行情况
- 总结成功经验
- 分析失败教训

### 2. 更新最佳实践

- 根据实践经验更新指南
- 分享有价值的发现
- 持续优化工作流程

### 3. 培养良好习惯

- 养成验证的习惯
- 养成沟通的习惯
- 养成记录的习惯
