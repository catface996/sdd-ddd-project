---
inclusion: manual
---

# 通用最佳实践

本文档定义了所有 Spec 开发阶段都应遵守的通用原则和最佳实践，适用于任何类型的项目。

## 语言使用规范

**基础要求**：所有对话、文档和交流尽可能使用中文。

**适用范围**：
- 与用户的所有对话交流
- 需求文档、设计文档、任务文档的编写
- 代码注释和文档说明
- 问题讨论和方案说明
- 进度汇报和总结说明

**例外情况**：
- 代码本身（变量名、函数名、类名等）可以使用英文
- 技术术语可以保留英文（如 API、JSON、Maven、POM 等）
- EARS 语法关键字保留英文大写（THE、SHALL、WHEN、WHILE、IF、THEN、WHERE）
- 引用的技术文档和规范中的英文内容

**为什么重要**：
- 确保沟通清晰准确，避免语言障碍
- 提高文档的可读性和可理解性
- 便于团队成员快速理解和协作
- 符合项目团队的语言习惯

## 为什么需要这些实践

LLM 是概率模型，单次生成可能存在偏差。通过渐进式开发、多次验证和持续反馈，可以显著提高输出质量，降低返工成本。

## 三大核心原则

### 1. 渐进式开发

**关键理念**：分阶段推进，每个阶段都要验证通过后再进入下一阶段。

**工作流程**：
```
需求 → 验证 → 设计 → 验证 → 任务拆分 → 验证 → 执行
```

**为什么重要**：
- 及早发现问题，降低修复成本
- 避免基于错误假设继续开发
- 确保每个阶段的输出质量

**实践要点**：
- 完成需求后，先自检再进入设计
- 完成设计后，先验证再拆分任务
- 完成任务拆分后，先确认再执行
- 切勿一次性完成所有阶段

### 2. 持续验证

**关键理念**：每个阶段完成后都要进行多维度验证。

**验证维度**：
- **一致性**：与上一阶段的输出是否一致？
- **完整性**：是否完整覆盖上一阶段的要求？
- **准确性**：理解和表述是否准确？
- **合理性**：是否存在内部冲突或过度设计？

**验证方法**：
- 自检：对照上一阶段文档逐项检查
- 交叉验证：检查内部各部分是否一致
- 用户确认：关键决策必须得到用户认可

### 3. 主动沟通

**关键理念**：遇到不确定的情况，主动与用户沟通，而不是自行假设。

**必须确认的情况**：
- 需求不清晰或存在歧义
- 设计方案有多种选择
- 发现可能的过度设计
- 任务拆分粒度不确定
- 技术实现方案需要权衡

**沟通原则**：
- 透明：及时报告进展和问题
- 具体：清晰表达疑问和建议
- 尊重：认真对待用户的反馈

## 质量保证检查清单

每个阶段完成后，使用以下检查清单进行自检：

### 完整性检查
- [ ] 是否覆盖了所有要求？
- [ ] 是否有遗漏的内容？
- [ ] 是否考虑了边界情况？

### 一致性检查
- [ ] 与前序阶段的输出是否一致？
- [ ] 内部各部分之间是否一致？
- [ ] 术语和概念使用是否一致？

### 准确性检查
- [ ] 对需求的理解是否准确？
- [ ] 技术方案的表述是否准确？
- [ ] 是否存在歧义或模糊的表述？

### 可行性检查
- [ ] 设计是否可实施？
- [ ] 任务是否可执行？
- [ ] 验证标准是否可操作？

### 合理性检查
- [ ] 是否存在过度设计？
- [ ] 是否有不必要的复杂性？
- [ ] 是否符合项目约束和限制？

## 文档编写标准

高质量的文档是成功的基础。遵循以下标准编写所有 Spec 文档：

### 清晰性
- 使用简洁明了的语言
- 避免模糊和歧义的表述
- 提供必要的上下文信息
- 使用具体的例子说明抽象概念

### 结构化
- 使用清晰的层次结构（标题、列表、段落）
- 合理组织内容（从概述到细节）
- 便于快速查找和理解
- 保持格式一致性

### 可追溯性
- 明确标注来源和依据
- 保持与原始需求的关联
- 记录重要的决策和理由
- 使用引用关联相关内容

## 常见陷阱与应对

了解常见陷阱，可以帮助你避免重复犯错。

### 陷阱 1：过早优化
**表现**：在需求不明确时就开始设计，在设计不完整时就开始编码。

**后果**：基于错误假设开发，导致大量返工。

**应对**：
- 严格遵循渐进式开发流程
- 每个阶段验证通过后再进入下一阶段
- 先保证正确性，再考虑性能优化

### 陷阱 2：过度设计
**表现**：为未来可能的需求设计复杂的架构，实现当前不需要的功能。

**后果**：增加复杂性，延长开发时间，降低可维护性。

**应对**：
- 只实现当前需要的功能
- 保持设计的简洁性
- 预留扩展点，但不提前实现

### 陷阱 3：忽视验证
**表现**：跳过验证环节，假设一切都是正确的。

**后果**：问题累积到后期，修复成本指数级增长。

**应对**：
- 每个阶段都要进行充分验证
- 使用检查清单确保不遗漏
- 及时发现和修正问题

### 陷阱 4：沟通不足
**表现**：自行假设用户的意图，隐藏问题和风险。

**后果**：理解偏差，交付物不符合预期。

**应对**：
- 遇到不确定的情况主动询问
- 定期同步进展和问题
- 关键决策必须得到用户确认

## 效率提升策略

### 前期投入，避免返工
- 前期充分验证，避免后期大改
- 及早发现问题，降低修复成本
- 保持良好的文档和代码质量

### 复用经验和模式
- 参考类似项目的成功经验
- 使用成熟的设计模式和架构
- 建立可复用的组件和模板

### 自动化验证
- 使用自动化测试验证功能
- 使用持续集成及早发现问题
- 使用代码质量检查工具

## 风险管理

### 识别风险
- **技术风险**：技术选型、实现难度、性能瓶颈
- **需求风险**：需求变更、理解偏差、范围蔓延
- **进度风险**：时间估算、依赖关系、资源限制

### 应对策略
- 对高风险项制定备选方案
- 预留适当的缓冲时间
- 建立风险监控和预警机制
- 及时调整计划和策略

## 持续改进

### 定期回顾
- 回顾项目执行情况
- 总结成功经验和失败教训
- 识别改进机会

### 更新实践
- 根据实践经验更新指南
- 分享有价值的发现
- 持续优化工作流程

### 培养习惯
- 养成验证的习惯
- 养成沟通的习惯
- 养成记录的习惯

## 总结

遵循这些通用最佳实践，可以：
- ✅ 提高交付质量
- ✅ 降低返工成本
- ✅ 提升开发效率
- ✅ 减少沟通成本
- ✅ 积累可复用的经验

记住：**渐进式开发、持续验证、主动沟通** 是成功的三大支柱。
