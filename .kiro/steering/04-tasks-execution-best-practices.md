---
inclusion: always
---

# 任务执行阶段最佳实践

## 阶段目标

按照任务列表逐个执行任务，将设计转化为可运行的代码，确保每个任务完成后项目都处于健康状态。

## 为什么任务执行阶段如此重要

任务执行是将设计变为现实的关键阶段。好的执行实践可以：
- 确保项目持续健康状态
- 及早发现和解决问题
- 提高代码质量和可维护性
- 支持团队协作开发
- 降低集成和部署风险

**核心原则**：每个任务完成后，项目必须可以成功构建。

## 任务执行工作流程

### 第一步：理解任务

在开始执行任务前，充分理解任务要求。

**关键活动**：
- 仔细阅读任务描述和验收标准
- 理解任务的目标和预期产出
- 确认前置条件是否满足
- 识别可能的技术难点

### 第二步：实现功能

按照任务描述实现功能。

**实现原则**：

#### 1. 保持项目持续可构建

**关键要求**：每执行完成一个任务，都要求整个工程都可以被成功构建。

**为什么重要**：
- 项目始终处于可运行状态
- 及时发现集成问题
- 支持持续集成和持续交付
- 降低后期集成风险

**如何做到**：
- 完成任务后立即运行构建命令
- 确保构建成功后再进入下一个任务
- 遇到构建失败立即修复

#### 2. 渐进式开发

**关键思想**：在多模块或多组件项目中，采用渐进式开发策略，避免预先声明尚未创建的模块或组件。

**基本原则**：
- 只声明已创建的组件
- 创建组件时同步更新配置
- 对于多层级结构，同样遵循此原则

**为什么重要**：
- 避免构建错误
- 保持配置与实际结构同步
- 支持增量开发

#### 3. 遵循代码质量标准

**编码规范**：
- 遵循项目统一的代码风格
- 使用有意义的变量和方法命名
- 添加必要的注释和文档

**错误处理**：
- 实现统一的异常处理机制
- 提供清晰的错误信息
- 避免异常信息泄露敏感数据

**测试要求**：
- 为核心业务逻辑编写单元测试（如任务要求）
- 确保测试覆盖率达到合理水平
- 集成测试验证模块间协作

### 第三步：验证任务

任务实现完成后，按照验收标准进行验证。

**验证优先级**：

#### 1. 运行时验证（最优先）

能通过实际运行应用来验证的功能，必须通过运行应用进行验证。

**适用场景**：
- 配置验证（多环境、特性开关等）
- API 端点功能验证
- 日志输出格式验证
- 异常处理验证
- 集成功能验证
- 外部服务连接验证

**验证方法**：
- 启动应用（使用项目的启动命令）
- 访问相关端点或触发相关功能
- 检查实际运行结果是否符合预期

#### 2. 构建验证（次优先）

无法通过运行验证的结构性要求，通过构建项目进行验证。

**适用场景**：
- 模块/组件结构验证
- 依赖关系验证
- 构建配置验证
- 代码语法正确性验证

**验证方法**：
- 执行项目的构建命令
- 检查构建日志确认无错误
- 确认所有组件按正确顺序构建

#### 3. 静态检查（最后）

仅在无法通过上述两种方式验证时，才使用静态文件检查。

**适用场景**：
- 文件存在性检查
- 配置文件内容检查
- 目录结构检查

### 第四步：任务完成确认

确认任务已完全完成，符合所有验收标准。

**检查要点**：
- 所有验收标准都已通过
- 项目可以成功构建
- 代码质量符合标准
- 相关文档已更新（如需要）

## 渐进式开发实施步骤

### 1. 确认当前状态
检查配置文件中只包含已创建的组件

### 2. 创建新组件
创建组件目录和必要的配置文件

### 3. 更新配置
在相关配置文件中添加新组件的声明

### 4. 验证构建
运行项目的构建命令确保构建成功

## 常见问题与应对

### 问题 1：构建失败

**表现**：执行构建命令后出现错误，项目无法成功构建。

**常见原因**：
- 组件声明与实际结构不一致
- 依赖关系配置错误
- 语言/框架版本不兼容
- 代码语法错误

**应对**：
- 检查组件声明是否正确
- 确认依赖版本是否兼容
- 检查代码语法错误
- 查看构建日志定位具体问题

### 问题 2：运行时错误

**表现**：构建成功但运行时出现错误。

**常见原因**：
- 配置文件格式错误
- 外部服务连接配置错误
- 端口占用
- 资源文件缺失

**应对**：
- 检查配置文件格式和内容
- 验证外部服务连接配置
- 确认端口是否被占用
- 检查资源文件是否存在

### 问题 3：集成问题

**表现**：单个组件正常，但组件间协作出现问题。

**常见原因**：
- 组件间接口不一致
- 数据格式不兼容
- 边界和职责划分不清

**应对**：
- 验证组件间接口一致性
- 检查数据格式兼容性
- 确认边界和职责划分
- 编写集成测试验证

### 问题 4：验证标准不明确

**表现**：不确定如何验证任务是否完成。

**应对**：
- 回顾任务的验收标准
- 按照验证优先级（运行时 > 构建 > 静态）选择验证方法
- 如有疑问，与用户确认验证方法

## 任务完成检查清单

在标记任务为完成前，确认以下所有项：

- [ ] 已充分理解任务要求和验收标准
- [ ] 代码已实现到正确的位置
- [ ] 相关配置文件已更新
- [ ] 项目可以成功构建
- [ ] 没有构建错误或警告
- [ ] 组件声明与实际目录结构一致
- [ ] 依赖关系配置正确
- [ ] 代码符合质量标准（编码规范、错误处理）
- [ ] **如果功能可运行验证，已通过运行应用进行验证**
- [ ] **如果是结构性变更，已通过构建验证**
- [ ] 所有验收标准都已通过
- [ ] 相关文档已更新（如需要）

## 关键收益

遵循任务执行阶段最佳实践，可以：

- ✅ 确保项目持续健康状态
- ✅ 及早发现和解决问题
- ✅ 提高代码质量和可维护性
- ✅ 支持团队协作开发
- ✅ 降低集成和部署风险
- ✅ 便于持续集成和自动化测试

**记住**：每个任务完成后，项目必须可以成功构建。这是任务执行阶段的铁律。
