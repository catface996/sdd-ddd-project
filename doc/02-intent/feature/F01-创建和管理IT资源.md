# F01: 创建和管理 IT 资源

## 基本信息

- **Feature ID**: F01
- **Feature 名称**: 创建和管理 IT 资源
- **优先级**: P0（MVP 必须）
- **状态**: 待开发
- **负责人**: 待分配
- **预计工作量**: 待评估

## 用户故事

作为运维工程师，我希望能够在系统中创建和管理各种 IT 资源（服务器、应用、数据库等），以便统一管理我的 IT 基础设施。

## 功能价值

- 提供统一的资源管理入口
- 支持多种资源类型
- 便于资源信息的维护和查询

## 核心功能

### 1. 创建资源
- 选择资源类型（服务器、应用、数据库、接口、中间件、报表）
- 填写基本信息（名称、描述、标签）
- 配置资源属性（状态、配置参数、连接信息）
- 设置元数据（负责人、团队、环境）

### 2. 查看资源列表
- 展示所有资源的列表视图
- 支持按名称搜索
- 支持按类型过滤
- 支持按标签过滤
- 支持排序（按创建时间、更新时间、名称）

### 3. 编辑资源信息
- 更新基本信息
- 修改资源属性
- 添加或删除标签
- 更新元数据

### 4. 删除资源
- 检查资源是否有关联关系
- 验证用户权限（只有 Owner 可以删除）
- 提示用户确认删除
- 执行删除操作

### 5. 查看资源详情
- 展示资源的完整信息
- 显示资源状态
- 显示资源配置
- 显示权限信息（Owner 和 Viewer 列表）

## 验收标准

### AC1: 创建资源
**WHEN** 用户点击"创建资源"按钮 **THEN** THE System **SHALL** 显示资源类型选择界面

**WHEN** 用户选择资源类型并填写必填信息 **THEN** THE System **SHALL** 创建资源并跳转到资源详情页

**WHEN** 用户创建资源 **THEN** THE System **SHALL** 自动将创建者设置为该资源的第一个 Owner

### AC2: 查看资源列表
**WHEN** 用户访问资源管理页面 **THEN** THE System **SHALL** 显示用户有权限查看的所有资源

**WHEN** 用户在搜索框输入关键词 **THEN** THE System **SHALL** 实时过滤并显示匹配的资源

**WHEN** 用户选择资源类型过滤器 **THEN** THE System **SHALL** 只显示该类型的资源

### AC3: 编辑资源
**WHEN** 用户是资源的 Owner **THEN** THE System **SHALL** 允许用户编辑资源信息

**WHEN** 用户不是资源的 Owner **THEN** THE System **SHALL** 禁止用户编辑资源信息

### AC4: 删除资源
**WHEN** 用户尝试删除有关联关系的资源 **THEN** THE System **SHALL** 提示用户该资源有关联关系并要求确认

**WHEN** 用户不是资源的 Owner **THEN** THE System **SHALL** 禁止用户删除资源

**WHEN** 用户确认删除资源 **THEN** THE System **SHALL** 删除资源并记录审计日志

### AC5: 资源类型支持
**WHEN** 用户创建资源 **THEN** THE System **SHALL** 支持至少 6 种资源类型：
- 基础设施（服务器、网络设备、存储设备）
- 应用（微服务应用、单体应用）
- 数据库（MySQL、PostgreSQL、Redis 等）
- 接口（REST API、gRPC 接口）
- 中间件（消息队列、配置中心）
- 报表（业务报表、监控报表）

## 依赖关系

### 前置依赖
- F10: 用户登录和身份认证
- F11: 管理资源的访问权限

### 后置依赖
- F02: 建立资源间的拓扑关系
- F03: 可视化查看拓扑图
- F06: 将 Agent 关联到资源节点

## 技术考虑

### 数据模型
- 资源基础表（存储通用属性）
- 资源类型扩展表（存储特定类型的属性）
- 资源标签关联表
- 资源权限表（Owner 和 Viewer）

### 性能要求
- 资源列表查询响应时间 < 1 秒
- 支持至少 10000 个资源的管理
- 搜索和过滤响应时间 < 500ms

### 安全要求
- 所有操作需要权限验证
- 删除操作需要记录审计日志
- 敏感信息（如连接凭证）需要加密存储

## 界面设计要点

### 资源列表页面
- 左侧：类型过滤器、标签过滤器
- 中间：资源列表（表格或卡片视图）
- 右上角：搜索框、创建按钮

### 资源创建页面
- 步骤 1：选择资源类型
- 步骤 2：填写基本信息
- 步骤 3：配置属性（可选）
- 步骤 4：确认创建

### 资源详情页面
- 顶部：资源名称、类型、状态、操作按钮
- Tab 页：概览、配置、拓扑、Agent、任务、权限

## 测试要点

### 功能测试
- 测试创建各种类型的资源
- 测试搜索和过滤功能
- 测试编辑和删除功能
- 测试权限控制

### 性能测试
- 测试大量资源的列表加载性能
- 测试搜索和过滤的响应时间

### 安全测试
- 测试未授权用户无法编辑/删除资源
- 测试敏感信息的加密存储

## 相关文档

- 需求文档: `doc/intent/blueprint.md` - 2.1.1 统一资源抽象
- Feature List: `doc/intent/feature-list.md` - F01

---

**创建日期**: 2024-11-20  
**最后更新**: 2024-11-20  
**文档版本**: v1.0
